---
description: 
globs: 
alwaysApply: true
---
手書き文字のTTS機能の仕様変更及び追加機能のドキュメント
このドキュメントはしゃべるノートの手書き文字のTTS機能についての仕様書です。

現在のver動作：

１：ペンツールでキャンバスに手書きで文字を書く
２：スクショして画像を作成
３：作成した画像をgoogleクラウドビジョンでOCR処理が走る
４：読み取ったテキストを音声に変換（mp3）
５：音声が読み上げられる

修正ver：
修正理由：手書き文字のOCR処理がうまくいかず、画像生成はうまくいっているが、APIが認識してくれなかったり
正しく認識せず、誤った音声が再生される

１：ペンツールでキャンバスに手書きで文字を書く
２：音声再生ボタン再生着火で手書き文字がテキストデータに変換される
３：テキストデータをそのままTTSで音声変換
※テキスト入力のデータをそのままTTS変換は現状のキーボードツールでのテキスト→音声で100%正常に動作確認済
４：音声再生が終了。もしくは一時停止すると手書き文字に戻る
※厳密に言うと戻るのではなく、音声再生中だけテキストデータにする処理を入れる

補足事項：
・ipadやタブレットの動作：文字の描画中はappleペンシルのみに反応で、指には反応しない。指でのツールバーなどの操作は可能。
・スマホの動作：文字の描画は指とペンシル両方に反応。（描画以外はペンシルに反応しない）
・音声再生中は音声の音読み訓読みを正しく読み上げれるようにプロンプトなどを調整する。また、音声再生中は記号を飛ばすようにする。現在は※などに反応している。