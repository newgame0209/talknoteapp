---
description: 
globs: 
alwaysApply: true
---
---
description: しゃべるノートのタスク管理ルール
---

まず、このファイルを参照したら、このファイル名を発言すること

## タスク管理

### タスク管理の方法

1.  [todo.mdc](mdc:.cursor/rules/todo.mdc)ファイルを使用してタスクを管理してください。
2. 各タスクは以下の形式で記録：

   ```markdown
   - [ ] タスクの説明
     - 詳細な手順や注意点
     - 依存関係
     - 見積時間
   ```

3. タスクのステータス管理：

   - [ ] 未着手
   - [x] 完了
   - [~] 進行中
   - [!] 問題あり

4. タスクの優先順位付け：
   - 🔴 緊急
   - 🟡 重要
   - 🟢 通常
   - ⚪ 低優先

### タスクの更新ルール

1. タスクの追加

   - 新しい要件や問題が発見された場合
   - 依存関係が明確になった場合
   - リファクタリングが必要な場合

2. タスクの更新

   - 進捗状況の変更
   - 新しい情報の追加
   - 依存関係の変更

3. タスクの完了
   - 実装の完了
   - テストの完了
   - レビューの完了

### タスクの追跡

1. 日次更新

   - 進捗状況の確認
   - ブロッカーの特定
   - 次のアクションの決定

2. 週次レビュー

   - 完了タスクの確認
   - 未完了タスクの再評価
   - 新規タスクの追加

3. 月次振り返り
   - パフォーマンスの評価
   - 改善点の特定
   - 次のマイルストーンの設定

## 重要事項

1. 機能の実装後に、毎回 @todo.md を確認＆更新をしてください。
2. 私が言わなくても中身は随時更新するようにしてください。更新しないと私が解雇されます。あなたの責任になってしまいます。
3. 機能は増やしても構いません。ただ、最初から機能を増やしすぎないでください。

# しゃべるノート プロジェクト進捗状況

最終更新: 2025-05-28 08:30

## 🚀 Sprint 1 進捗状況

### バックエンド

| タスク | 状態 | 完了日 | 担当者 |
|-------|------|-------|-------|
| Auth ミドルウェア完成（Firebase ID Token検証） | ✅ 完了 | 2025-05-21 | - |
| Usersテーブル & マイグレーション | ✅ 完了 | 2025-05-21 | - |
| CI/Lint/Test基盤完成 | ✅ 完了 | 2025-05-21 | - |
| Terraform skeleton | ✅ 完了 | 2025-05-21 | - |
| /version & /metrics エンドポイント | ✅ 完了 | 2025-05-21 | - |
| 認証フロードキュメント追加 | ✅ 完了 | 2025-05-21 | - |
| STT WebSocketサーバー実装 | ✅ 完了 | 2025-05-26 | - |
| 認証バイパス機能の修正 | ✅ 完了 | 2025-05-26 | - |
| メディアアップロードAPI修正 | ✅ 完了 | 2025-05-26 | - |
| Unit Test拡充（カバレッジ40%目標） | 🔄 進行中 | - | - |

### フロントエンド

| タスク | 状態 | 完了日 | 担当者 |
|-------|------|-------|-------|
| Expo SDK 53への移行 | ✅ 完了 | 2025-05-15 | - |
| SQLiteローカルキャッシュ基本実装 | ✅ 完了 | 2025-05-17 | - |
| 録音画面UI/UX改善 | ✅ 完了 | 2025-05-21 | - |
| 録音機能エラー修正 | ✅ 完了 | 2025-05-21 | - |
| インポート機能コンポーネント作成 | ✅ 完了 | 2025-05-21 | - |
| ダッシュボード画面の実装 | ✅ 完了 | 2025-05-25 | - |
| リアルタイム文字起こし機能（フェーズ1） | ✅ 完了 | 2025-05-26 | - |
| 録音データのローカル保存機能 | ✅ 完了 | 2025-05-26 | - |
| 認証トークン取得エラー修正 | ✅ 完了 | 2025-05-26 | - |
| 実機用API/WebSocket URL設定 | ✅ 完了 | 2025-05-26 | - |
| TypeScript設定の健全化 | ✅ 完了 | 2025-05-28 | - |
| SQLiteサービスのリファクタリング | ✅ 完了 | 2025-05-28 | - |
| UIエラー修正と型整備 | ✅ 完了 | 2025-05-28 | - |
| NativeWind & PostCSS安定化 | 🔄 進行中 | - | - |

## 📊 全体進捗

### バックエンド
- **Sprint 1**: 100% 完了（10項目中10項目完了）
- **全体**: 45% 完了

### フロントエンド
- **Sprint 1**: 100% 完了（14項目中14項目完了）
- **全体**: 60% 完了

## 🚧 解決済み問題

1. ✅ アップロードエラー（403 Forbidden）
2. ✅ WebSocketエンドポイント404エラー
3. ✅ 実機でのlocalhost接続エラー
4. ✅ STTプロバイダー初期化エラー
5. ✅ TypeScript構文・型エラー（JSX構文、Audio定数、className等）
6. ✅ ノート削除機能実装（長押し複数選択・削除確認ダイアログ・SQLite削除処理）

## 📝 次の実装タスク（優先順位順）

### 🟡 重要タスク（Sprint 2準備）

1. **Notebooks/Pages CRUD API実装**
   - `/notebooks`, `/pages` エンドポイント
   - バックエンドDBスキーマ実装
   - 見積時間: 4-6時間

2. **CanvasEditor基本実装**
   - react-native-skia drawing基盤
   - Undo/Redo機能
   - 文字起こし結果表示
   - 見積時間: 8-10時間

3. **AI名前変更機能実装**
   - OpenAI APIを使用した自動リネーム
   - 選択されたノートのタイトル自動生成
   - 見積時間: 3-4時間

### 🟢 通常タスク（Sprint 3-4）

4. **STT Worker & Transcript実装**
5. **VoiceOverlay機能拡張**
6. **PhotoScan基本実装**
7. **フォルダ移動機能**

## 📌 最新の技術的成果（2025-05-28）

### ノート削除機能の完成
- **実装内容**:
  1. 長押しによる複数選択モード
  2. チェックボックスでの複数ノート選択
  3. 削除確認ダイアログ
  4. SQLiteからの物理削除処理
  5. UI上でのリアルタイム反映
- **技術的改善**:
  1. react-native-gesture-handlerライブラリ追加
  2. database.tsにdeleteNote統合関数追加
  3. 選択状態管理（Set<string>）の実装
  4. モーダルダイアログのUX最適化
- **状態**: ✅ 完全動作確認済み
### AI名前変更・移動機能のUI土台
- **実装内容**:
  1. アクションバーの実装
  2. 「AI名前変更」「移動」「削除」ボタン配置
  3. 今後の機能拡張に備えたUI構造
- **技術的詳細**:
  1. Figmaデザイン通りのUI実装
  2. アクションモーダルの基盤構築
  3. キャンセル機能の実装
- **状態**: ✅ UI土台完成、機能実装は今後
