---
description: 
globs: 
alwaysApply: false
---
# ğŸš€ ã—ã‚ƒã¹ã‚‹ãƒãƒ¼ãƒˆ â€“ ä¿®æ­£ / æ–°æ©Ÿèƒ½ å®Ÿè£…ãƒ•ãƒ­ãƒ¼

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€ãƒã‚°ä¿®æ­£ã‚„æ–°æ©Ÿèƒ½è¿½åŠ ã‚’è¡Œã£ãŸã‚ã¨ **10ã€œ15 åˆ†ä»¥å†…** ã«å®Ÿæ©Ÿã§å‹•ä½œç¢ºèªã™ã‚‹ã¾ã§ã®æ‰‹é †ã‚’æ¨™æº–åŒ–ã—ãŸã‚‚ã®ã§ã™ã€‚

---
## 0. å‰æ
* **Dev Client æœ€æ–°ç‰ˆ IPA** ãŒ iPhone/iPad ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã€‚
* **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ API** ã¯ãƒ­ãƒ¼ã‚«ãƒ« (`http://192.168.0.xx`) ã§èµ·å‹•å¯èƒ½ã€‚
* `eas.json` ã«ãƒ›ãƒ¼ãƒ ç”¨(`dev-home`) / ã‚ªãƒ•ã‚£ã‚¹ç”¨(`dev-office`) ãªã© IP åˆ‡æ›¿ç”¨ã®ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”¨æ„æ¸ˆã¿ã€‚
* `infoPlist` ã«ã¯ ATS ä¾‹å¤– (`NSAllowsArbitraryLoads: true`) ã‚’è¨­å®šæ¸ˆã¿ã€‚

---
## 1. ã‚³ãƒ¼ãƒ‰å¤‰æ›´
1. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ (`app/`) ã¾ãŸã¯ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ (`backend/`) ã‚’ä¿®æ­£ / æ–°æ©Ÿèƒ½è¿½åŠ ã€‚
2. **ESLint / Prettier / MyPy** ãŒé€šã‚‹ã“ã¨ã‚’ç¢ºèªã€‚
3. `todo.mdc` ã‚’æ›´æ–°ã—ã¦ã‚¿ã‚¹ã‚¯ã‚’ã‚¯ãƒ­ãƒ¼ã‚ºã€‚

---
## 2. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ã¿å¤‰æ›´ (ãƒã‚¤ãƒ†ã‚£ãƒ–å¤‰æ›´ãªã—)
| æ‰€è¦æ™‚é–“ | æ‰‹é † |
|---|---|
| 30â€“60 ç§’ | `eas update --branch development --platform ios --non-interactive --message "feat: xxx"` |
| +15 ç§’ | OTA ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å®Œäº† â†’ Dev Client å†èµ·å‹• or Dev Menu â†’ **Updates > Check** |
| +20 ç§’ | **æ–°ã—ã„ Dev Client ã‚’å…¥ã‚ŒãŸç›´å¾Œã¯ JS ãŒç©ºã®ãŸã‚**<br>Home ç”»é¢ â†’ Enter URL manually ã«<br>`exp://u.expo.dev/289c2b35-e74b-4c11-abc4-d0c7e2f9df79?channel-name=development` ã‚’1åº¦å…¥åŠ› â†’ æ¬¡å›ä»¥é™ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã§ä¸è¦ |
| âœ… | å‹•ä½œç¢ºèªå®Œäº† |

âš ï¸ **ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ¼ãƒ‰ã‚„ `app.config.js > ios/android` ã«å¤‰æ›´ãŒç„¡ã„ã“ã¨** ã‚’å¿…ãšç¢ºèªã€‚

---
## 3. ãƒã‚¤ãƒ†ã‚£ãƒ–è¨­å®šã‚’å¤‰æ›´ã—ãŸå ´åˆ (InfoPlist, Pod è¿½åŠ  ç­‰)
| æ‰€è¦æ™‚é–“ | æ‰‹é † |
|---|---|
| 7â€“10 åˆ† | `eas build --profile dev-home --platform ios --non-interactive`<br>â€» ã‚ªãƒ•ã‚£ã‚¹ç”¨ãªã‚‰ `dev-office` |
| +1 åˆ†  | ãƒ“ãƒ«ãƒ‰å®Œäº†ãƒ¡ãƒ¼ãƒ«/URL ã‹ã‚‰ IPA ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ & ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« |
| +30 ç§’ | Dev Client èµ·å‹• â†’ å‹•ä½œç¢ºèª |
| â• å¿…è¦ãªã‚‰ `eas update` ã§ JS å·®ã—æ›¿ãˆ |

---
## 4. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å¤‰æ›´ã®ã¿
1. `cd backend && uvicorn app.main:app --reload --host 0.0.0.0 --port 8000` ã§ãƒ­ãƒ¼ã‚«ãƒ«èµ·å‹•ã€‚
2. å®Ÿæ©ŸãŒåŒä¸€ LAN ã«ã‚ã‚Šã€`EXPO_PUBLIC_API_BASE_URL` ãŒãƒ­ãƒ¼ã‚«ãƒ« IP ã‚’æŒ‡ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã€‚
3. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å´ã¯å†èµ·å‹•ä¸è¦ã€‚å³åº§ã« API å¤‰æ›´ã‚’ãƒ†ã‚¹ãƒˆå¯èƒ½ã€‚

---
## 5. é«˜é€ŸåŒ– Tips
* **.easignore** ã« `backend/`, `docs/`, `android/` ã‚’å¿…ãšå«ã‚ã‚‹ã€‚
* `assetBundlePatterns` ã¯ `assets/**/*` ãªã©æœ€å°ç¯„å›²ã«é™å®šã€‚
* `EAS_CLI` ã¯æœˆ1ã§ `npm i -g eas-cli` ã§æ›´æ–°ã€‚æ–°æ©Ÿèƒ½ã§ãƒ“ãƒ«ãƒ‰æ™‚é–“çŸ­ç¸®ã‚ã‚Šã€‚
* ç”»åƒãƒ»éŸ³å£°ãªã©å¤§å®¹é‡ã‚¢ã‚»ãƒƒãƒˆã¯ Cloud Storage/CDN ã§é…ä¿¡ã—ã€OTA ã«ã¯å«ã‚ãªã„ã€‚

---
## 6. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
| ç—‡çŠ¶ | åŸå›  | å¯¾ç­– |
|---|---|---|
| OTA ãŒå–å¾—ã•ã‚Œãªã„ | runtimeVersion ä¸ä¸€è‡´ | Dev Client ã¨åŒã˜ commit ã‹ã‚‰ `eas update` |
| `Exportingâ€¦` ãŒé•·ã„ | ãƒ•ã‚¡ã‚¤ãƒ«ã‚¹ã‚­ãƒ£ãƒ³éå¤š | `.easignore`, `assetBundlePatterns` ã‚’æœ€é©åŒ– |
| HTTP API ã¸ç¹‹ãŒã‚‰ãªã„ | ATS ãƒ–ãƒ­ãƒƒã‚¯ | `infoPlist.NSAppTransportSecurity` ã§è¨±å¯ or HTTPS ãƒˆãƒ³ãƒãƒ« |
| iOS ãƒ“ãƒ«ãƒ‰å¤±æ•— | Certificate/Provision å•é¡Œ | Expo Dev Console ã§ Credentials ã‚’å†åŒæœŸ |

---
## 7. ã‚ˆãä½¿ã†ã‚³ãƒãƒ³ãƒ‰
```bash
# JS/Asset ã ã‘æ›´æ–° (æœ€é€Ÿ)
eas update --branch development --platform ios --non-interactive -m "fix: auto-save"

# Dev Client å†ãƒ“ãƒ«ãƒ‰ (ãƒ›ãƒ¼ãƒ )
eas build --profile dev-home --platform ios --non-interactive

# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰èµ·å‹•
cd backend && uvicorn app.main:app --reload --host 0.0.0.0 --port 8000

# OTA ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ä»˜ã
eas update --branch development -p ios --non-interactive \
  --message "debug" --clear-cache EAS_DEBUG=1
```

---
æœ€çµ‚æ›´æ–°: 2024-06-25
